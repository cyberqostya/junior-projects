(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9615:function(e,t,s){Promise.resolve().then(s.bind(s,2625))},2625:function(e,t,s){"use strict";s.d(t,{default:function(){return k}});var n=s(7437),a=s(3984),c=s.n(a),i=s(4044),l=s.n(i);function o(e){let{onClick:t}=e;return(0,n.jsx)("button",{className:l().clear,onClick:t,type:"reset",children:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M11 20C15 20 19 16 19 12C19 7 15 4 11 4C7 4 3 7 3 12C3 16 7 20 11 20ZM8 15C8 15 8 15 8 14C8 14 8 14 8 14L10 12L8 10C8 10 8 10 8 9C8 9 8 9 8 9C9 9 9 9 9 9L11 11L13 9C13 9 13 9 14 9C14 9 14 9 14 9C14 10 14 10 14 10L12 12L14 14C14 14 14 14 14 14C14 15 14 15 14 15C13 15 13 15 13 15L11 13L9 15C9 15 9 15 8 15Z",fill:"#C4C4C4"})})})}function r(e){let{phrase:t,typing:s,clear:a}=e;return(0,n.jsxs)("label",{className:c().wrapper,children:[(0,n.jsx)("img",{src:"/images/magnifier.svg",alt:"search icon"}),(0,n.jsx)("input",{minLength:2,required:!0,value:t,type:"text",placeholder:"Телефоны, яблоки, груши...",className:c().input,onChange:s}),t.length>0&&(0,n.jsx)(o,{onClick:a})]})}var u=s(9249),p=s.n(u),_=s(5642),m=s.n(_),h=s(2265),g=(0,h.memo)(function(e){let{onClick:t,children:s}=e;return(0,n.jsx)("button",{className:m().button,onClick:t,children:s})}),d=(0,h.memo)(function(e){let{searchPhrase:t,typeSearchPhrase:s,clearSearchPhrase:a,getImages:c,isLoading:i,isFirstLoad:l}=e,[o,u]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{i&&l&&u(!0)},[i]),(0,n.jsxs)("form",{className:"".concat(p().search," ").concat(o?p().search_submit:""),onSubmit:c,children:[(0,n.jsx)(r,{phrase:t,typing:s,clear:a}),(0,n.jsx)(g,{children:"Искать"})]})}),x=s(7981),f=s.n(x),j=s(7903),y=s.n(j),C=(0,h.memo)(function(e){let{apiResponseStatus:t,apiResponse:s,isLoading:a,isFirstLoad:c}=e,[i,l]=(0,h.useState)(""),[o,r]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{if(a)(async()=>{c&&await new Promise(e=>{setTimeout(e,400)}),l("Загрузка..."),r(!0)})();else{if(c)return;200===t&&0!==s.total?(r(!1),l("")):(r(!0),200===t?l("К сожалению, поиск не дал результатов"):400===t?l("Ошибка запроса, попробуйте снова"):l("Ошибка сервера, повторите попытку через некоторое время"))}},[a]),(0,n.jsx)("p",{className:"".concat(y().text," ").concat(o?y().text_appeared:""),children:i})}),b=s(8470),w=s.n(b),L=s(6531),N=s.n(L),v=(0,h.memo)(function(e){let{src:t,alt:s,srcFull:a}=e,[c,i]=(0,h.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("li",{children:(0,n.jsx)("img",{className:N().image,src:t,alt:s,onClick:()=>{i(!0)}})}),c&&(0,n.jsxs)("div",{className:N().popup,onClick:e=>{e.target.matches("[class*=popup__image]")||i(!1)},children:[(0,n.jsx)("button",{className:N().close,children:(0,n.jsx)("img",{src:"/images/close.svg",alt:"close popup icon"})}),(0,n.jsx)("img",{className:N().popup__image,src:a,alt:s})]})]})}),S=function(e){let{apiResponse:t,displayedImages:s,loadMoreImages:a,isLoading:c}=e;return(0,n.jsxs)("div",{className:w().container,children:[(0,n.jsx)("ul",{className:w().images,children:s.map((e,t)=>(0,n.jsx)(v,{src:e.urls.small,alt:e.alt_description,srcFull:e.urls.full},t))}),t.total_pages>1&&s.length<t.total&&(0,n.jsx)("div",{className:"".concat(w().button," ").concat(c?w().button_loading:""),children:(0,n.jsx)(g,{onClick:a,children:"Показать ещё"})})]})};function k(){let[e,t]=(0,h.useState)(!1),[s,a]=(0,h.useState)(0),[c,i]=(0,h.useState)(null),[l,o]=(0,h.useState)(!0),[r,u]=(0,h.useState)([]),[p,_]=(0,h.useState)(""),[m,g]=(0,h.useState)(1),x=(0,h.useRef)(""),j=async e=>{e.preventDefault(),t(!0),u([]),await new Promise(e=>{setTimeout(e,700)}),x.current="https://api.unsplash.com/search/photos?client_id=Ip0XA55zY7b7-d19osq1L5btGg-YCeDZVpnnJjXqHxs"+"&query=".concat(encodeURI(p),"&lang=").concat(p.match(/[a-zA-Z]/)?"en":"ru","&per_page=").concat(20),fetch(x.current).then(e=>{if(a(e.status),e.ok)return e.json()}).then(e=>{i(e),u(e.results)}).catch(e=>console.log(e.message)).finally(()=>{t(!1),o(!1),g(1)})},y=async()=>{t(!0),await new Promise(e=>{setTimeout(e,700)}),fetch(x.current+"&page=".concat(m+1)).then(e=>{if(e.ok)return e.json()}).then(e=>{u([...r,...e.results]),g(m+1)}).catch(e=>console.log(e.message)).finally(()=>{t(!1)})};return(0,n.jsxs)("main",{className:f().main,children:[(0,n.jsx)(d,{searchPhrase:p,typeSearchPhrase:e=>{_(e.target.value)},clearSearchPhrase:()=>{_("")},getImages:j,isLoading:e,isFirstLoad:l}),r.length>0&&(0,n.jsx)(S,{apiResponse:c,displayedImages:r,loadMoreImages:y,isLoading:e}),(0,n.jsx)(C,{apiResponse:c,isLoading:e,apiResponseStatus:s,isFirstLoad:l})]})}},7903:function(e){e.exports={text:"style_text__aqIk9",text_appeared:"style_text_appeared__6pgGX"}},5642:function(e){e.exports={button:"style_button__Ucn3Z"}},4044:function(e){e.exports={clear:"style_clear__LdzWj"}},7981:function(e){e.exports={main:"style_main__2FazC"}},6531:function(e){e.exports={image:"style_image__mPxR8",popup:"style_popup__myUJo",popup__image:"style_popup__image__iGyAm",close:"style_close__n2i5Q"}},8470:function(e){e.exports={container:"style_container__GMjGe",images:"style_images__zMKA2",button:"style_button__mdLdU",button_loading:"style_button_loading__vb8wR"}},3984:function(e){e.exports={wrapper:"style_wrapper__uw1If",input:"style_input__WkDPb"}},9249:function(e){e.exports={search:"style_search__XYdwY",search_submit:"style_search_submit___Z_AG"}}},function(e){e.O(0,[315,971,23,744],function(){return e(e.s=9615)}),_N_E=e.O()}]);